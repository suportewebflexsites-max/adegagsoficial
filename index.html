<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Adega GS Oficial</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  font-family:Arial, Helvetica, sans-serif;
  background:#f4f4f4;
  color:#111;
}
header{
  background:#fff;
  padding:16px;
  text-align:center;
  border-bottom:1px solid #ddd;
}
h1{margin:0;color:#000}
small{color:#666}

.section{
  background:#fff;
  margin:12px;
  padding:14px;
  border-radius:10px;
}

h2{
  margin:0 0 10px 0;
  font-size:18px;
}

.item{
  display:flex;
  justify-content:space-between;
  align-items:center;
  border-bottom:1px solid #eee;
  padding:8px 0;
}

.qty{
  display:flex;
  gap:6px;
  align-items:center;
}

.qty button{
  width:28px;
  height:28px;
  border:none;
  border-radius:6px;
  background:#ddd;
  font-weight:bold;
}

.cart-btn{
  position:fixed;
  bottom:20px;
  right:20px;
  background:#00c853;
  color:#fff;
  width:60px;
  height:60px;
  border-radius:50%;
  display:flex;
  justify-content:center;
  align-items:center;
  font-size:24px;
}

.badge{
  position:absolute;
  top:-5px;
  right:-5px;
  background:red;
  color:#fff;
  border-radius:50%;
  font-size:12px;
  padding:2px 6px;
}

#cartBox{
  display:none;
  position:fixed;
  top:0;left:0;
  width:100%;
  height:100%;
  background:#f4f4f4;
  overflow:auto;
}

input,select,textarea{
  width:100%;
  padding:10px;
  margin:6px 0;
  border-radius:6px;
  border:1px solid #ccc;
}

.total{
  font-size:16px;
  font-weight:bold;
}

.finalizar{
  position:fixed;
  bottom:0;
  left:0;
  width:100%;
  background:#00c853;
  color:#fff;
  padding:16px;
  border:none;
  font-size:18px;
}
</style>
</head>

<body>

<header>
<h1>üç∫ Adega GS Oficial</h1>
<small>üïí Aberto das 11:00 √†s 04:00</small><br>
<small>üìç Rua Pl√°cido Parreira Lima, 142</small>
</header>

<div class="section">
<h2>üç∫ Produtos</h2>

<div class="item">
<span>Pastel Frango Catupiry ‚Äì R$ 9,00</span>
<div class="qty">
<button onclick="alt('Pastel Frango Catupiry',9,-1)">-</button>
<span id="q-Pastel Frango Catupiry">0</span>
<button onclick="alt('Pastel Frango Catupiry',9,1)">+</button>
</div>
</div>

<div class="item">
<span>Pastel Pizza ‚Äì R$ 8,00</span>
<div class="qty">
<button onclick="alt('Pastel Pizza',8,-1)">-</button>
<span id="q-Pastel Pizza">0</span>
<button onclick="alt('Pastel Pizza',8,1)">+</button>
</div>
</div>

<div class="item">
<span>Torcidas Carne ‚Äì R$ 4,00</span>
<div class="qty">
<button onclick="alt('Torcidas Carne',4,-1)">-</button>
<span id="q-Torcidas Carne">0</span>
<button onclick="alt('Torcidas Carne',4,1)">+</button>
</div>
</div>
</div>

<div class="cart-btn" onclick="openCart()">üõí<span class="badge" id="count">0</span></div>

<div id="cartBox">
<div class="section">
<button onclick="closeCart()">‚¨Ö Voltar</button>

<h2>Cupom</h2>
<input id="cupom" placeholder="Cupom (opcional)">

<h2>CEP</h2>
<input id="cep" placeholder="CEP *" onblur="buscarCEP()">

<div id="mapa"></div>

<h2>Dados do Cliente</h2>
<input id="nome" placeholder="Nome *">
<input id="cpf" placeholder="CPF *">
<input id="endereco" placeholder="Endere√ßo *">
<select id="pagamento">
<option value="">Pagamento *</option>
<option>Pix</option>
<option>Cr√©dito</option>
<option>D√©bito</option>
</select>
<textarea id="obs" placeholder="Observa√ß√µes"></textarea>

<p class="total" id="resumo"></p>
</div>

<button class="finalizar" onclick="finalizar()">FINALIZAR NO WHATSAPP</button>
</div>

<script>
let cart={},frete=0,dist=0;

function alt(n,p,v){
cart[n]=(cart[n]||0)+v;
if(cart[n]<0)cart[n]=0;
document.getElementById("q-"+n).innerText=cart[n];
render();
}

function render(){
let c=Object.values(cart).reduce((a,b)=>a+b,0);
document.getElementById("count").innerText=c;
}

function openCart(){cartBox.style.display="block";calc();}
function closeCart(){cartBox.style.display="none";}

function buscarCEP(){
let c=cep.value.replace(/\D/g,'');
if(c.length!==8)return;
fetch("https://viacep.com.br/ws/"+c+"/json/")
.then(r=>r.json()).then(d=>{
endereco.value=d.logradouro+" - "+d.bairro+" - "+d.localidade;
mapa.innerHTML=`<iframe width="100%" height="200" 
src="https://maps.google.com/maps?q=${encodeURIComponent(endereco.value)}&output=embed"></iframe>`;
dist=(parseInt(c.slice(-2))%15)+1;
if(dist<=3)frete=5;
else if(dist<=6)frete=8;
else if(dist<=10)frete=10;
else frete=15;
calc();
});
}

function calc(){
let sub=0;
for(let i in cart)sub+=cart[i]*9;
resumo.innerText=`Frete: R$ ${frete.toFixed(2)} | Total: R$ ${(sub+frete).toFixed(2)}`;
}

function finalizar(){
if(!nome.value||!cpf.value||!endereco.value||!pagamento.value){
alert("Preencha todos os campos obrigat√≥rios");
return;
}
let msg="üõí PEDIDO ADEGA GS%0A";
for(let i in cart) if(cart[i]>0) msg+=`${cart[i]}x ${i}%0A`;
msg+=`Frete: R$ ${frete}%0ATotal: ${resumo.innerText}%0A`;
msg+=`Nome: ${nome.value}%0ACPF: ${cpf.value}%0A`;
window.open("https://wa.me/5511981654980?text="+msg);
}
</script>

</body>
</html>
