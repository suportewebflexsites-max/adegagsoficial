<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Adega GS Oficial</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{margin:0;font-family:Arial;background:#0f0f0f;color:#fff}
header{text-align:center;padding:15px;background:#000}
h1{color:#ffd700;margin:0}
p{color:#bbb;margin:4px 0}

.section{padding:15px}
h2{border-bottom:2px solid #25d366;color:#ffd700;padding-bottom:5px}

.item{
display:flex;justify-content:space-between;align-items:center;
padding:8px 0;border-bottom:1px solid #333
}

button{
background:#25d366;border:none;padding:6px 10px;
border-radius:6px;font-weight:bold;cursor:pointer
}

.cart-btn{
position:fixed;bottom:15px;right:15px;
background:#25d366;color:#000;
width:55px;height:55px;border-radius:50%;
display:flex;align-items:center;justify-content:center;
font-size:22px;cursor:pointer;z-index:10
}

.badge{
position:absolute;top:-5px;right:-5px;
background:red;color:#fff;border-radius:50%;
font-size:12px;padding:2px 6px
}

#cartBox{
display:none;position:fixed;top:0;left:0;
width:100%;height:100%;background:#000;
overflow:auto;padding:15px;z-index:999
}

.cart-item{
display:flex;justify-content:space-between;align-items:center;
margin:6px 0
}

.qty button{padding:4px 8px;margin:0 4px}

input,select,textarea{
width:100%;padding:8px;margin:6px 0;
border-radius:6px;border:none
}

.row{display:flex;gap:10px}
.row input{flex:1}

.total{font-weight:bold;margin-top:10px}
.freteBox{color:#25d366;margin-top:5px}
.close{background:#444;margin-bottom:10px}
</style>
</head>

<body>

<header>
<h1>ğŸº Adega GS Oficial</h1>
<p>ConveniÃªncia â€¢ Delivery rÃ¡pido</p>
<p>ğŸ•’ 11:00 Ã s 04:00</p>
<p>ğŸ“ Rua PlÃ¡cido Parreira Lima, 142</p>
</header>

<div class="section">
<h2>ğŸº Cervejas</h2>
<div class="item"><span>Skol 269ml</span><button onclick="add('Skol 269ml',4)">R$4</button></div>
<div class="item"><span>Heineken 269ml</span><button onclick="add('Heineken 269ml',5.2)">R$5,20</button></div>
</div>

<div class="section">
<h2>ğŸŸ PorÃ§Ãµes</h2>
<div class="item"><span>Calabresa</span><button onclick="add('PorÃ§Ã£o de Calabresa',25)">R$25</button></div>
</div>

<div class="cart-btn" onclick="openCart()">ğŸ›’<span class="badge" id="qtd">0</span></div>

<div id="cartBox">
<button class="close" onclick="closeCart()">â¬… Voltar</button>

<h2>ğŸ›’ Carrinho</h2>
<div class="row">
<input id="cupom" placeholder="Cupom (ex: OFF10)">
<input id="cep" placeholder="CEP *" onblur="buscarCEP()">
</div>

<div id="lista"></div>

<div class="freteBox" id="freteBox"></div>
<div class="total" id="total"></div>

<h2>ğŸ“‹ Dados do Cliente</h2>
<input id="nome" placeholder="Nome *">
<input id="endereco" placeholder="EndereÃ§o *">
<select id="pagamento">
<option value="">Pagamento *</option>
<option>Pix</option>
<option>CrÃ©dito</option>
<option>DÃ©bito</option>
</select>
<textarea id="obs" placeholder="ObservaÃ§Ãµes"></textarea>

<button onclick="finalizar()">FINALIZAR NO WHATSAPP</button>
</div>

<script>
let cart={},frete=null,distancia=0;

function add(nome,preco){
cart[nome]=cart[nome]||{preco,qtd:0};
cart[nome].qtd++;
render();
}

function change(nome,v){
cart[nome].qtd+=v;
if(cart[nome].qtd<=0) delete cart[nome];
render();
}

function openCart(){cartBox.style.display="block";render();}
function closeCart(){cartBox.style.display="none";}

async function buscarCEP(){
let c=cep.value.replace(/\D/g,'');
if(c.length!==8) return;

let r=await fetch(`https://viacep.com.br/ws/${c}/json/`);
let d=await r.json();
if(d.erro){alert("CEP invÃ¡lido");return;}
endereco.value=`${d.logradouro}, ${d.bairro} - ${d.localidade}/${d.uf}`;

distancia=(parseInt(c.slice(-3))%15)+1;
frete=distancia<=3?5:distancia<=6?8:distancia<=10?10:15;
render();
}

function render(){
let lista=document.getElementById("lista");
let subtotal=0,q=0;
lista.innerHTML="";

for(let i in cart){
let item=cart[i];
subtotal+=item.preco*item.qtd;
q+=item.qtd;
lista.innerHTML+=`
<div class="cart-item">
<span>${i}</span>
<div class="qty">
<button onclick="change('${i}',-1)">-</button>
${item.qtd}
<button onclick="change('${i}',1)">+</button>
</div>
</div>`;
}

qtd.innerText=q;

let desconto=cupom.value==="OFF10"?10:0;
let total=subtotal+(frete||0)-desconto;

freteBox.innerText=frete
?`ğŸšš Frete: R$ ${frete} (${distancia} km)`
:"ğŸšš Informe o CEP";

total.innerText=`Subtotal: R$ ${subtotal.toFixed(2)} | Total: R$ ${total.toFixed(2)}`;
}

function finalizar(){
if(!nome.value||!endereco.value||!pagamento.value||frete===null){
alert("Preencha tudo corretamente");return;
}

let msg="ğŸ›’ *PEDIDO â€“ ADEGA GS OFICIAL*%0A%0A";
for(let i in cart){
msg+=`â€¢ ${i} x${cart[i].qtd}%0A`;
}
msg+=`%0AğŸšš Frete: R$ ${frete}%0AğŸ’° Total: ${total.innerText.split('|')[1]}%0A`;
msg+=`ğŸ‘¤ ${nome.value}%0AğŸ“ ${endereco.value}%0AğŸ’³ ${pagamento.value}%0AğŸ“ ${obs.value||'-'}`;

window.open("https://wa.me/5511981654980?text="+msg);
}
</script>

</body>
</html>
