<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Adega GS Oficial</title>

<style>
body{margin:0;font-family:Arial;background:#0e0e0e;color:#fff}
header{padding:15px;border-bottom:1px solid #222;display:flex;gap:12px;align-items:center}
header img{width:60px;height:60px;border-radius:8px}
header h1{margin:0;color:#d4af37;font-size:22px}
header p{margin:4px 0 0;color:#aaa;font-size:13px}

.banner{background:#2ecc71;color:#000;padding:10px;text-align:center;font-weight:bold}

.container{max-width:900px;margin:auto;padding:16px}

.category h2{color:#d4af37;border-bottom:1px solid #222;padding-bottom:6px;margin-top:30px}

.product{
background:#1a1a1a;
padding:14px;
border-radius:12px;
display:flex;
align-items:center;
justify-content:space-between;
margin-bottom:12px
}
.product img{width:60px;height:60px;border-radius:8px;background:#000}
.product-info{flex:1;margin-left:10px}
.product-info strong{color:#2ecc71}
.product button{
background:#2ecc71;
border:none;
padding:8px 14px;
border-radius:8px;
font-weight:bold
}

.cart-btn{
position:fixed;
bottom:20px;
right:20px;
background:#2ecc71;
width:58px;height:58px;
border-radius:50%;
display:flex;
align-items:center;
justify-content:center;
font-size:22px;
z-index:999
}
.cart-count{
position:absolute;
top:-6px;right:-6px;
background:red;color:#fff;
width:20px;height:20px;
border-radius:50%;
font-size:12px;
display:flex;
align-items:center;
justify-content:center
}

#overlay{position:fixed;inset:0;background:rgba(0,0,0,.85);display:none;z-index:2000}
#cart{background:#111;width:100%;max-width:420px;height:100%;margin-left:auto;padding:20px;overflow-y:auto}

.progress-box{margin:10px 0}
.progress-text{font-size:13px;color:#f1c40f}
.progress-bar{height:8px;background:#333;border-radius:6px;overflow:hidden;margin-top:4px}
.progress-fill{height:100%;background:#2ecc71;width:0%}

input,select,textarea{width:100%;padding:12px;margin:8px 0;border-radius:8px;border:none}
button{cursor:pointer}

/* üîû MODAL 18+ */
#ageModal{
position:fixed;inset:0;background:#000;z-index:5000;
display:flex;align-items:center;justify-content:center;text-align:center
}
#ageModal div{background:#111;padding:30px;border-radius:12px;max-width:320px}
#ageModal button{margin:10px;padding:12px;width:100%;border:none;border-radius:8px;font-weight:bold}
</style>
</head>

<body>

<!-- üîû BLOQUEIO 18+ -->
<div id="ageModal">
<div>
<h2>üîû Conte√∫do para maiores de 18 anos</h2>
<p>Voc√™ confirma que √© maior de idade?</p>
<button style="background:#2ecc71" onclick="confirmAge()">SIM, sou maior</button>
<button style="background:#444;color:#fff" onclick="alert('Acesso n√£o permitido')">N√ÉO</button>
</div>
</div>

<header>
<img src="logo.png">
<div>
<h1>Adega GS Oficial</h1>
<p>Rua Pl√°cido Parreira Lima, 142<br>11:00 √†s 00:00 ‚Ä¢ 00:00 √†s 04:00</p>
</div>
</header>

<div class="banner">üéÅ Frete GR√ÅTIS para pedidos acima de R$ 120,00</div>

<div class="container" id="products"></div>

<div class="cart-btn" onclick="openCart()">üõí
<div class="cart-count" id="cartCount">0</div>
</div>

<div id="overlay">
<div id="cart">
<h2>Meu Carrinho</h2>
<div id="cartItems"></div>

<div class="progress-box">
<div class="progress-text" id="freeText"></div>
<div class="progress-bar"><div class="progress-fill" id="freeBar"></div></div>
</div>

<p id="distanceInfo"></p>
<p id="freteInfo"></p>

<h3>Total: R$ <span id="total">0.00</span></h3>
<p style="color:#d4af37">Pedido m√≠nimo: R$ 20,00</p>

<select id="pagamento" onchange="updatePagamento()">
<option value="">Forma de pagamento *</option>
<option value="PIX">PIX</option>
<option value="CRED">Cr√©dito</option>
<option value="DEB">D√©bito</option>
</select>

<div id="pagamentoInfo" style="font-size:13px;color:#ccc"></div>

<input type="file" required>
<input placeholder="Nome *">
<input placeholder="Endere√ßo *">
<input placeholder="N√∫mero *">
<input placeholder="CPF *">
<textarea placeholder="Observa√ß√µes (opcional)"></textarea>

<button style="width:100%;background:#2ecc71;padding:14px;border:none;border-radius:10px;margin-top:10px" onclick="finalizar()">Finalizar pedido</button>
<button style="width:100%;background:#444;color:#fff;padding:14px;border:none;border-radius:10px;margin-top:8px" onclick="closeCart()">Continuar comprando</button>
</div>
</div>

<script>
const WHATSAPP="5511981654980";
const PIX_KEY="61.888.559/0001-94";
const FREE_LIMIT=120;
const storeLat=-23.6687;
const storeLng=-46.4613;

let cart={},userLat=null,userLng=null,frete=0;

/* üîû */
function confirmAge(){
document.getElementById("ageModal").style.display="none";
requestGPS();
}

/* üìç GPS OBRIGAT√ìRIO */
function requestGPS(){
navigator.geolocation.getCurrentPosition(p=>{
userLat=p.coords.latitude;
userLng=p.coords.longitude;
calcFrete();
},()=>alert("Ative o GPS para continuar"));
}

/* üìè DIST√ÇNCIA */
function calcDist(lat1,lon1,lat2,lon2){
const R=6371;
const dLat=(lat2-lat1)*Math.PI/180;
const dLon=(lon2-lon1)*Math.PI/180;
const a=Math.sin(dLat/2)**2+
Math.cos(lat1*Math.PI/180)*Math.cos(lat2*Math.PI/180)*Math.sin(dLon/2)**2;
return R*2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));
}

/* üöö FRETE */
function calcFrete(){
const d=calcDist(userLat,userLng,storeLat,storeLng);
document.getElementById("distanceInfo").innerText=`üìç Dist√¢ncia: ${d.toFixed(1)} km`;

if(d<=3) frete=5;
else if(d<=5) frete=8;
else if(d<=8) frete=12;
else if(d<=12) frete=15;
else if(d<=15) frete=18;
else frete=Math.ceil(d)*2;

document.getElementById("freteInfo").innerText=`üöö Frete: R$ ${frete.toFixed(2)}`;
update();
}

function updatePagamento(){
const p=document.getElementById("pagamento").value;
if(p==="PIX") document.getElementById("pagamentoInfo").innerText=
`üí∞ PIX autom√°tico\nChave: ${PIX_KEY}\nEnvie o comprovante`;
else if(p) document.getElementById("pagamentoInfo").innerText=
"Ap√≥s finalizar o pedido, enviaremos o link de pagamento.";
else document.getElementById("pagamentoInfo").innerText="";
}

function finalizar(){
if(!userLat) return alert("GPS obrigat√≥rio");
window.open(`https://wa.me/${WHATSAPP}`,"_blank");
}
</script>

</body>
</html>
