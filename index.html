<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Adega GS Oficial</title>

<!-- PREVIEW DO LINK (WHATSAPP / GOOGLE) -->
<meta property="og:title" content="Adega GS Oficial">
<meta property="og:description" content="Delivery de bebidas ‚Ä¢ 11h √†s 04h">
<meta property="og:image" content="https://www.adegagsoficial.com.br/logo.png">
<meta property="og:url" content="https://www.adegagsoficial.com.br">
<meta property="og:type" content="website">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial,sans-serif}
body{background:#0e0e0e;color:#fff;overflow-x:hidden}
img{max-width:100%}

/* LOGO */
.logo{max-width:140px;margin-bottom:10px}

/* MODAL */
.modal{
 position:fixed;inset:0;background:#000;
 display:flex;align-items:center;justify-content:center;
 z-index:9999
}
.modal-box{
 background:#111;padding:25px;border-radius:14px;
 max-width:360px;text-align:center
}
.modal-box h2{color:#d4af37;margin-bottom:10px}
.modal-box p{color:#ccc;font-size:14px;margin:6px 0}
.modal-box button{
 width:100%;padding:12px;margin-top:12px;
 border:none;border-radius:8px;font-weight:bold;cursor:pointer
}
.btn-yes{background:#2ecc71;color:#000}
.btn-no{background:#444;color:#fff}

/* HEADER */
header{text-align:center;padding:20px;border-bottom:1px solid #222}
header h1{color:#d4af37}

/* CONTAINER */
.container{max-width:900px;margin:auto;padding:18px}

/* CATEGORIA */
.category{margin-top:30px}
.category h2{color:#d4af37;border-bottom:1px solid #222;margin-bottom:12px}

/* PRODUTO */
.product{
 background:#1a1a1a;padding:12px;border-radius:12px;
 display:flex;gap:12px;align-items:center;margin-bottom:10px
}
.product img{
 width:60px;height:60px;border-radius:8px;
 background:#000;object-fit:contain
}
.product-info{flex:1}
.product-info strong{color:#2ecc71}
.product button{
 background:#2ecc71;border:none;padding:8px 14px;
 border-radius:8px;font-weight:bold;cursor:pointer
}

/* CARRINHO BOT√ÉO */
.cart-btn{
 position:fixed;bottom:20px;right:20px;
 width:60px;height:60px;background:#2ecc71;
 border-radius:50%;display:flex;align-items:center;
 justify-content:center;font-size:22px;z-index:1000
}
.cart-count{
 position:absolute;top:-6px;right:-6px;
 background:red;width:20px;height:20px;
 border-radius:50%;display:flex;
 align-items:center;justify-content:center;font-size:12px
}

/* OVERLAY */
#overlay{
 position:fixed;inset:0;background:rgba(0,0,0,.85);
 display:none;z-index:2000
}
#cart{
 background:#111;height:100%;width:100%;
 max-width:420px;margin-left:auto;
 padding:20px;overflow-y:auto
}
.cart-item{
 display:flex;justify-content:space-between;
 align-items:center;margin:10px 0
}
.controls button{
 background:#333;color:#fff;border:none;
 padding:4px 8px;border-radius:4px;margin:0 4px
}
.total{font-size:18px;margin-top:10px}
.min{color:#d4af37;font-size:13px}

input,select,textarea{
 width:100%;margin-top:8px;padding:10px;
 border-radius:8px;border:none
}
textarea{resize:none}

.actions{display:flex;gap:10px;margin-top:14px}
.actions button{
 flex:1;padding:14px;border:none;
 border-radius:10px;font-weight:bold
}
.primary{background:#2ecc71;color:#000}
.secondary{background:#444;color:#fff}

/* PRINT */
@media print{
 body *{visibility:hidden}
 #printArea,#printArea *{visibility:visible}
 #printArea{width:58mm;font-size:12px}
}
</style>
</head>

<body>

<!-- MAIORIDADE -->
<div class="modal" id="ageModal">
 <div class="modal-box">
  <img src="logo.png" class="logo">
  <h2>üîû Aviso de Maioridade</h2>
  <p>Voc√™ √© maior de 18 anos?</p>
  <p>Rua Pl√°cido Parreira Lima, 142</p>
  <p>11:00 √†s 04:00 ‚Ä¢ Todos os dias</p>
  <button class="btn-yes" onclick="setAge(true)">SIM</button>
  <button class="btn-no" onclick="alert('Acesso n√£o permitido')">N√ÉO</button>
 </div>
</div>

<!-- GPS -->
<div class="modal" id="gpsModal" style="display:none">
 <div class="modal-box">
  <h2>üìç Localiza√ß√£o</h2>
  <p>Precisamos do GPS para calcular o frete.</p>
  <button class="btn-yes" onclick="getLocation()">Permitir localiza√ß√£o</button>
 </div>
</div>

<header>
 <img src="logo.png" class="logo">
 <h1>Adega GS Oficial</h1>
 <p>Rua Pl√°cido Parreira Lima, 142 ‚Ä¢ 11h √†s 04h</p>
</header>

<div class="container" id="products"></div>

<div class="cart-btn" onclick="openCart()">üõí
 <div class="cart-count" id="cartCount">0</div>
</div>

<div id="overlay">
 <div id="cart">
  <h2>Meu Carrinho</h2>
  <div id="cartItems"></div>

  <p>üìç Dist√¢ncia: <span id="distancia">0</span> km</p>
  <p>üöö Frete: R$ <span id="frete">0.00</span></p>
  <div class="total">Total: R$ <span id="total">0.00</span></div>
  <div class="min">Pedido m√≠nimo: R$ 20,00</div>

  <select id="pagamento">
   <option value="">Forma de pagamento *</option>
   <option>PIX</option>
   <option>D√©bito</option>
   <option>Cr√©dito</option>
  </select>

  <input placeholder="Cupom (opcional)">
  <p style="font-size:12px;color:#ccc;margin-top:8px">
   O link de pagamento ser√° enviado junto com o valor do frete.<br>
   Ap√≥s o pagamento confirmado, o pedido ser√° preparado e enviado.
  </p>

  <input type="file" accept="image/*,.pdf">

  <input id="nome" placeholder="Nome *">
  <input id="endereco" placeholder="Endere√ßo *">
  <input id="numero" placeholder="N√∫mero *">
  <input id="cpf" placeholder="CPF *">
  <textarea id="obs" placeholder="Observa√ß√µes (opcional)"></textarea>

  <div class="actions">
   <button class="secondary" onclick="closeCart()">Continuar comprando</button>
   <button class="primary" onclick="finalizar()">Finalizar pedido</button>
  </div>
 </div>
</div>

<!-- AREA IMPRESS√ÉO -->
<div id="printArea">
 <img src="logo.png" style="max-width:120px">
 <p><b>ADEGA GS OFICIAL</b><br>
 Rua Pl√°cido Parreira Lima, 142<br>
 11h √†s 04h</p>
 <hr>
 <div id="printContent"></div>
</div>

<script>
const WHATSAPP="5511981654980";
const ADEGA_LAT=-23.5235, ADEGA_LNG=-46.4743;
let isAdult=false, cart={}, distancia=0, frete=0;

const produtos={
 "Cervejas":[["Amstel 269ml",9],["Heineken 269ml",5.2],["Skol 269ml",4]],
 "Energ√©ticos":[["Red Bull 250ml",10],["Vibe 2L",11.6]],
 "Gelo & Extras":[["Carv√£o",18],["Saco de Gelo",18]]
};

function setAge(v){isAdult=v;document.getElementById("ageModal").style.display="none";document.getElementById("gpsModal").style.display="flex"}

function getLocation(){
 navigator.geolocation.getCurrentPosition(p=>{
  const d=calcDist(ADEGA_LAT,ADEGA_LNG,p.coords.latitude,p.coords.longitude);
  distancia=d.toFixed(1);
  frete=calcFrete(d);
  document.getElementById("gpsModal").style.display="none";
  render();
 });
}

function calcDist(a,b,c,d){
 const R=6371, x=(c-a)*Math.PI/180, y=(d-b)*Math.PI/180;
 return R*2*Math.atan2(Math.sqrt(Math.sin(x/2)**2+Math.cos(a*Math.PI/180)*Math.cos(c*Math.PI/180)*Math.sin(y/2)**2),Math.sqrt(1));
}

function calcFrete(k){
 if(k<=3)return 4.99;
 if(k<=5)return 6.99;
 if(k<=7)return 8.99;
 if(k<=10)return 9.99;
 if(k<=15)return 12.99;
 if(k<=20)return 16.99;
 if(k<=30)return 22.99;
 if(k<=40)return 27.99;
 if(k<=50)return 32.99;
 return 0;
}

function render(){
 let html="";
 for(let c in produtos){
  html+=`<div class="category"><h2>${c}</h2></div>`;
  produtos[c].forEach(p=>{
   html+=`
   <div class="product">
    <img src="https://via.placeholder.com/60">
    <div class="product-info">
     <span>${p[0]}</span>
     <strong>R$ ${p[1].toFixed(2)}</strong>
    </div>
    <button onclick="add('${p[0]}',${p[1]})">Adicionar</button>
   </div>`;
  });
 }
 document.getElementById("products").innerHTML=html;
}

function add(n,p){
 cart[n]?cart[n].q++:cart[n]={p,q:1};
 updateCart();
}

function updateCart(){
 let t=0,c=0,html="";
 for(let k in cart){
  t+=cart[k].p*cart[k].q;c+=cart[k].q;
  html+=`<div class="cart-item">${k} x${cart[k].q}</div>`;
 }
 document.getElementById("cartItems").innerHTML=html;
 document.getElementById("cartCount").innerText=c;
 document.getElementById("frete").innerText=frete.toFixed(2);
 document.getElementById("distancia").innerText=distancia;
 document.getElementById("total").innerText=(t+frete).toFixed(2);
}

function openCart(){document.getElementById("overlay").style.display="block"}
function closeCart(){document.getElementById("overlay").style.display="none"}

function finalizar(){
 if(parseFloat(total.innerText)<20)return alert("Pedido m√≠nimo R$20");
 if(!pagamento.value||!nome.value||!endereco.value||!numero.value||!cpf.value)
  return alert("Preencha os campos obrigat√≥rios");
 window.open(`https://wa.me/${WHATSAPP}`,"_blank");
 document.getElementById("printContent").innerHTML=document.getElementById("cartItems").innerHTML;
 window.print();
}
</script>

</body>
</html>
