<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Adega GS Oficial</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- MAPA -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<style>
body{margin:0;font-family:Arial;background:#0f0f0f;color:#fff}
header{text-align:center;padding:20px;background:#000}
h1{color:#ffd700;margin:0}
p{color:#bbb;margin:5px 0}

.section{padding:20px}
h2{border-bottom:2px solid #25d366;color:#ffd700;padding-bottom:5px}

.item{display:flex;justify-content:space-between;align-items:center;
padding:10px 0;border-bottom:1px solid #333}

button{background:#25d366;border:none;padding:6px 12px;
border-radius:6px;font-weight:bold;cursor:pointer}

.cart-btn{
position:fixed;bottom:20px;right:20px;
background:#25d366;color:#000;
width:55px;height:55px;border-radius:50%;
display:flex;align-items:center;justify-content:center;
font-size:22px;cursor:pointer;z-index:999
}

.badge{
position:absolute;top:-5px;right:-5px;
background:red;color:#fff;border-radius:50%;
font-size:12px;padding:2px 6px
}

#cartBox{
display:none;position:fixed;top:0;left:0;
width:100%;height:100%;background:#000;
overflow:auto;padding:20px;z-index:9999
}

input,select,textarea{
width:100%;padding:10px;margin:6px 0;
border-radius:6px;border:none;background:#111;color:#fff
}

.total{font-size:16px;font-weight:bold;margin-top:10px}
.freteBox{margin-top:10px;color:#25d366}

.qtdBtn{
background:#444;color:#fff;border:none;
padding:4px 8px;margin:0 4px;border-radius:4px
}

#mapa{
width:100%;height:200px;margin-top:10px;
border-radius:10px;border:1px solid #25d366;display:none
}

.finalizar{
position:sticky;bottom:10px;
background:#25d366;color:#000;
padding:12px;border-radius:8px;
font-size:16px;margin-top:15px
}
</style>
</head>

<body>

<header>
<h1>ğŸº Adega GS Oficial</h1>
<p>Rua PlÃ¡cido Parreira Lima, 142 â€¢ 11:00 Ã s 04:00</p>
</header>

<!-- PRODUTOS -->
<div class="section">
<h2>ğŸº Cervejas</h2>
<div class="item"><span>Skol 269ml</span><button onclick="add('Skol 269ml',4)">R$4,00</button></div>
<div class="item"><span>Original 269ml</span><button onclick="add('Original 269ml',4)">R$4,00</button></div>
<div class="item"><span>Heineken 269ml</span><button onclick="add('Heineken 269ml',5.2)">R$5,20</button></div>
<div class="item"><span>Amstel 269ml</span><button onclick="add('Amstel 269ml',9)">R$9,00</button></div>
</div>

<div class="section">
<h2>ğŸŸ PorÃ§Ãµes</h2>
<div class="item"><span>Calabresa</span><button onclick="add('PorÃ§Ã£o Calabresa',25)">R$25,00</button></div>
<div class="item"><span>Batata Frita</span><button onclick="add('Batata Frita',22)">R$22,00</button></div>
</div>

<div class="section">
<h2>ğŸ¥Ÿ Pastel</h2>
<div class="item"><span>Carne</span><button onclick="add('Pastel Carne',8)">R$8,00</button></div>
<div class="item"><span>Pizza</span><button onclick="add('Pastel Pizza',8)">R$8,00</button></div>
<div class="item"><span>Frango c/ Catupiry</span><button onclick="add('Pastel Frango Catupiry',9)">R$9,00</button></div>
</div>

<div class="section">
<h2>ğŸ« Chocolates</h2>
<div class="item"><span>Bis</span><button onclick="add('Bis',4.5)">R$4,50</button></div>
</div>

<div class="section">
<h2>ğŸ¥¨ Salgadinhos</h2>
<div class="item"><span>Torcidas Carne</span><button onclick="add('Torcidas Carne',4)">R$4,00</button></div>
<div class="item"><span>Torcidas Churrasco</span><button onclick="add('Torcidas Churrasco',4)">R$4,00</button></div>
<div class="item"><span>Torcidas Bacon</span><button onclick="add('Torcidas Bacon',4)">R$4,00</button></div>
<div class="item"><span>Torcidas Vinagrete</span><button onclick="add('Torcidas Vinagrete',4)">R$4,00</button></div>
</div>

<!-- BOTÃƒO CARRINHO -->
<div class="cart-btn" onclick="openCart()">ğŸ›’<span class="badge" id="qtd">0</span></div>

<!-- CARRINHO -->
<div id="cartBox">
<button onclick="closeCart()">â¬… Voltar</button>

<h2>ğŸ›’ Carrinho</h2>
<div id="lista"></div>
<div class="total" id="total"></div>
<div class="freteBox" id="freteBox"></div>

<input id="cupom" placeholder="Cupom (opcional)">
<input id="cep" placeholder="CEP *" oninput="buscarCEP()">
<div id="mapa"></div>

<h2>ğŸ“‹ Dados do Cliente</h2>
<input id="nome" placeholder="Nome *">
<input id="endereco" placeholder="EndereÃ§o *">
<select id="pagamento">
<option value="">Forma de pagamento *</option>
<option>Pix</option>
<option>CrÃ©dito</option>
<option>DÃ©bito</option>
</select>
<textarea id="obs" placeholder="ObservaÃ§Ãµes"></textarea>

<button class="finalizar" onclick="finalizar()">FINALIZAR NO WHATSAPP</button>
</div>

<script>
let cart=[],frete=null,distancia=null,map,marker;

function add(nome,preco){
let item=cart.find(i=>i.nome===nome);
if(item)item.qtd++;
else cart.push({nome,preco,qtd:1});
document.getElementById("qtd").innerText=
cart.reduce((s,i)=>s+i.qtd,0);
}

function openCart(){cartBox.style.display="block";render();}
function closeCart(){cartBox.style.display="none";}

function render(){
let lista=document.getElementById("lista");
let subtotal=0;
lista.innerHTML="";
cart.forEach(i=>{
subtotal+=i.preco*i.qtd;
lista.innerHTML+=`
<p>${i.nome} - R$ ${i.preco.toFixed(2)}
<button class="qtdBtn" onclick="i.qtd--;if(i.qtd<=0)cart.splice(cart.indexOf(i),1);render()">-</button>
${i.qtd}
<button class="qtdBtn" onclick="i.qtd++;render()">+</button>
</p>`;
});
let total=subtotal+(frete||0);
totalEl.innerText=`Subtotal: R$ ${subtotal.toFixed(2)} | Total: R$ ${total.toFixed(2)}`;
freteBox.innerText=frete==null?"Informe o CEP para calcular frete":
frete==0?"ğŸšš Frete GRÃTIS":
`ğŸšš Frete R$ ${frete.toFixed(2)} (${distancia} km)`;
}

async function buscarCEP(){
let c=cep.value.replace(/\D/g,'');
if(c.length!==8){frete=null;render();return;}

let r=await fetch(`https://viacep.com.br/ws/${c}/json/`);
let d=await r.json();
if(d.erro)return alert("CEP invÃ¡lido");

endereco.value=`${d.logradouro}, ${d.bairro} - ${d.localidade}/${d.uf}`;

if(!map){
map=L.map("mapa").setView([-23.55,-46.63],13);
L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(map);
marker=L.marker([-23.55,-46.63]).addTo(map);
mapa.style.display="block";
}

distancia=(parseInt(c.slice(-3))%15)+1;
frete=distancia<=3?5:distancia<=6?8:distancia<=10?10:15;
render();
}

function finalizar(){
if(!nome.value||!endereco.value||!pagamento.value||frete==null)
return alert("Preencha todos os dados");

let msg="ğŸ›’ *PEDIDO â€“ ADEGA GS OFICIAL*%0A%0A";
cart.forEach(i=>msg+=`â€¢ ${i.qtd}x ${i.nome}%0A`);
msg+=`%0AğŸšš Frete: ${frete==0?"GRÃTIS":"R$ "+frete.toFixed(2)}%0A`;
msg+=`ğŸ‘¤ ${nome.value}%0AğŸ“ ${endereco.value}%0AğŸ’³ ${pagamento.value}`;
window.open("https://wa.me/5511981654980?text="+msg);
}
</script>

</body>
</html>
