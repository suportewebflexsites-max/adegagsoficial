<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Adega GS Oficial</title>

<style>
body{margin:0;font-family:Arial;background:#0e0e0e;color:#fff}
header{padding:15px;border-bottom:1px solid #222;display:flex;gap:12px;align-items:center}
header img{width:60px;height:60px;border-radius:8px}
header h1{margin:0;color:#d4af37;font-size:22px}
header p{margin:4px 0 0;color:#aaa;font-size:13px}

.banner{background:#2ecc71;color:#000;padding:10px;text-align:center;font-weight:bold}

.container{max-width:900px;margin:auto;padding:16px}

.category h2{color:#d4af37;border-bottom:1px solid #222;padding-bottom:6px;margin-top:30px}

.product{
background:#1a1a1a;
padding:14px;
border-radius:12px;
display:flex;
align-items:center;
justify-content:space-between;
margin-bottom:12px
}
.product img{width:60px;height:60px;border-radius:8px;background:#000}
.product-info{flex:1;margin-left:10px}
.product-info strong{color:#2ecc71}
.product button{
background:#2ecc71;
border:none;
padding:8px 14px;
border-radius:8px;
font-weight:bold
}

.cart-btn{
position:fixed;
bottom:20px;
right:20px;
background:#2ecc71;
width:58px;height:58px;
border-radius:50%;
display:flex;
align-items:center;
justify-content:center;
font-size:22px;
z-index:999
}
.cart-count{
position:absolute;
top:-6px;right:-6px;
background:red;color:#fff;
width:20px;height:20px;
border-radius:50%;
font-size:12px;
display:flex;
align-items:center;
justify-content:center
}

#overlay{position:fixed;inset:0;background:rgba(0,0,0,.85);display:none;z-index:2000}
#cart{background:#111;width:100%;max-width:420px;height:100%;margin-left:auto;padding:20px;overflow-y:auto}

.progress-box{margin:10px 0}
.progress-text{font-size:13px;color:#f1c40f}
.progress-bar{height:8px;background:#333;border-radius:6px;overflow:hidden;margin-top:4px}
.progress-fill{height:100%;background:#2ecc71;width:0%}

input,select,textarea{width:100%;padding:12px;margin:8px 0;border-radius:8px;border:none}
button{cursor:pointer}
.hidden{display:none}
</style>
</head>

<body>

<!-- MODAL 18+ -->
<div id="ageModal" style="position:fixed;inset:0;background:rgba(0,0,0,.9);display:flex;align-items:center;justify-content:center;z-index:3000">
<div style="background:#111;padding:25px;border-radius:12px;text-align:center;max-width:300px">
<h3>üîû Conte√∫do para maiores de 18 anos</h3>
<p>Voc√™ confirma que √© maior de idade?</p>
<button onclick="confirmAge(true)" style="width:100%;background:#2ecc71;padding:10px;border:none;border-radius:8px">SIM, sou maior</button>
<button onclick="confirmAge(false)" style="width:100%;background:#444;color:#fff;padding:10px;border:none;border-radius:8px;margin-top:8px">N√ÉO</button>
</div>
</div>

<header>
<img src="logo.png">
<div>
<h1>Adega GS Oficial</h1>
<p>Rua Pl√°cido Parreira Lima, 142<br>11:00 √†s 00:00 ‚Ä¢ 00:00 √†s 04:00</p>
</div>
</header>

<div class="banner">üéÅ Frete GR√ÅTIS para pedidos acima de R$ 120,00</div>

<div class="container" id="products"></div>

<div class="cart-btn" onclick="openCart()">üõí
<div class="cart-count" id="cartCount">0</div>
</div>

<div id="overlay">
<div id="cart">
<h2>Meu Carrinho</h2>
<div id="cartItems"></div>

<div class="progress-box">
<div class="progress-text" id="freeText"></div>
<div class="progress-bar"><div class="progress-fill" id="freeBar"></div></div>
</div>

<p id="distanceInfo"></p>
<p id="freteInfo"></p>

<h3>Total: R$ <span id="total">0.00</span></h3>
<p style="color:#d4af37">Pedido m√≠nimo: R$ 20,00</p>

<select id="pagamento">
<option value="">Forma de pagamento *</option>
<option>PIX</option>
<option>Cr√©dito</option>
<option>D√©bito</option>
</select>

<div id="pixBox" class="hidden">
<p><strong>PIX (CNPJ)</strong><br>61.888.559/0001-94</p>
<img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=00020126360014BR.GOV.BCB.PIX0114618885590001945204000053039865406100.005802BR5909ADEGAGS6009SAOPAULO62070503***6304ABCD" width="200">
</div>

<input placeholder="Cupom (opcional)">
<input type="file">
<input id="nome" placeholder="Nome *">
<input id="cep" placeholder="CEP *">
<input id="rua" placeholder="Endere√ßo *">
<input id="numero" placeholder="N√∫mero *">
<input id="cpf" placeholder="CPF *">
<textarea id="obs" placeholder="Observa√ß√µes (opcional)"></textarea>

<button style="width:100%;background:#2ecc71;padding:14px;border:none;border-radius:10px;margin-top:10px" onclick="finalizar()">Finalizar pedido</button>
<button style="width:100%;background:#444;color:#fff;padding:14px;border:none;border-radius:10px;margin-top:8px" onclick="closeCart()">Continuar comprando</button>
</div>
</div>

<script>
const WHATSAPP="5511981654980";
const FREE_LIMIT=120;
const storeLat=-23.6687;
const storeLng=-46.4613;

let cart={},userLat=null,userLng=null;
let pedidoID="GS-"+Math.floor(Math.random()*900000+100000);

const produtos={
"Cervejas":[["Skol 269ml",4],["Original 269ml",4],["Heineken 269ml",5.2],["Amstel 269ml",9]],
"Energ√©ticos":[["Red Bull 250ml",10]]
};

function render(){
const div=document.getElementById("products");
for(let c in produtos){
div.innerHTML+=`<div class="category"><h2>${c}</h2></div>`;
produtos[c].forEach(p=>{
div.innerHTML+=`
<div class="product">
<img src="https://via.placeholder.com/60">
<div class="product-info">
<span>${p[0]}</span><br>
<strong>R$ ${p[1].toFixed(2)}</strong>
</div>
<button onclick="add('${p[0]}',${p[1]})">Adicionar</button>
</div>`;
});
}
}
render();

function add(n,p){cart[n]?cart[n].q++:cart[n]={p,q:1};update()}
function update(){
let t=0,c=0,html="";
for(let k in cart){t+=cart[k].p*cart[k].q;c+=cart[k].q;
html+=`${k} x${cart[k].q}<br>`;
}
document.getElementById("cartItems").innerHTML=html;
document.getElementById("total").innerText=t.toFixed(2);
document.getElementById("cartCount").innerText=c;
updateFree(t);
}
function updateFree(total){
let falta=FREE_LIMIT-total;
let pct=Math.min(100,(total/FREE_LIMIT)*100);
document.getElementById("freeBar").style.width=pct+"%";
document.getElementById("freeText").innerText=
falta>0?`Faltam R$ ${falta.toFixed(2)} para frete gr√°tis`:"üéâ Frete gr√°tis garantido!";
}

function openCart(){document.getElementById("overlay").style.display="block"}
function closeCart(){document.getElementById("overlay").style.display="none"}

navigator.geolocation.getCurrentPosition(p=>{
userLat=p.coords.latitude;
userLng=p.coords.longitude;
});

document.getElementById("pagamento").addEventListener("change",e=>{
document.getElementById("pixBox").classList.toggle("hidden",e.target.value!=="PIX");
});

function confirmAge(ok){
document.getElementById("ageModal").style.display="none";
if(!ok){
document.querySelectorAll(".category").forEach(c=>{
if(c.innerText.includes("Cervejas")) c.remove();
});
}
}

function finalizar(){
if(!userLat) return alert("Ative o GPS");
if(!document.getElementById("cep").value) return alert("Informe o CEP");
if(!document.getElementById("cpf").value) return alert("Informe o CPF");

let msg=`üü¢ NOVO PEDIDO ‚Äî ADEGA GS OFICIAL\n\nPEDIDO: ${pedidoID}\n\nCliente: ${nome.value}\nCPF: ${cpf.value}\nEndere√ßo: ${rua.value}, ${numero.value}\n\nItens:\n`;
for(let k in cart){msg+=`‚Ä¢ ${k} x${cart[k].q}\n`;}
msg+=`\nTOTAL: R$ ${document.getElementById("total").innerText}`;
window.open(`https://wa.me/${WHATSAPP}?text=${encodeURIComponent(msg)}`,"_blank");
}
</script>

</body>
</html>
